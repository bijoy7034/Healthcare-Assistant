{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <title>Healthlink</title>
    <link
      rel="stylesheet"
      href="{% static 'core/css/bootstrap/four/bootstrap.css' %}"
    />
    <link href="{% static 'core/css/sb-admin.css' %}" rel="stylesheet" />
    <link href="{% static 'core/css/home.css' %}" rel="stylesheet" />
    
    <link
      href="{% static 'core/css/fontawesome-free/css/all.min.css' %}"
      rel="stylesheet"
      type="text/css"
    />
  </head>

  <body id="page-top">
    <div id="wrapper" style="padding-top: 0px">
      <div class="mt-4">
        <center>
          <h2 class="heading text-primary">
            <i class="fa-solid fa-staff-snake text-primary"></i> Healthlink
          </h2>
        </center>
        <ul class="sidebar navbar-nav">
          <li class="nav-item active">
            <a class="nav-link" href="{% url 'patient' %}">
              <i class="fa-solid fa-pager text-secondary"></i>
              <span class="ml-2">Patient Dashboard</span>
            </a>
          </li>

          {% if status == '1' %}
          <li class="nav-item active">
            <a class="nav-link" href="{% url 'profile'%}">
              <i class="fa-solid fa-user text-secondary"></i>
              <span class="ml-2">Profile</span>
            </a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="{% url 'med_pro'%}">
              <i class="fa-solid fa-heart-pulse text-secondary"></i>
              <span class="ml-2">Medical Profile</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'diagnosis'%}">
              <i class="fa-solid fa-stethoscope"></i>
              <span class="ml-2" style="color: white">Make Diagnosis</span>
            </a>
          </li>

          <li class="nav-item">
            <a class="nav-link" href="{% url 'result' %}">
              <i class="fa-solid fa-microscope"></i>
              <span class="ml-2" style="color: white">Diagnosis Results</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'ment_list' %}">
              <i class="fa-solid fa-wheelchair-move"></i>
              <span class="ml-2" style="color: white">Appointment</span>
            </a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="">
              <i class="fa-solid fa-star-of-life text-secondary"></i>
              <span class="ml-2">AI Therapist</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'location' %}">
              <i class="fa-solid fa-hospital"></i>
              <span class="ml-2" style="color: white">Nearest Hospital</span>
            </a>
          </li>
          {% else %}

          <li class="nav-item">
            <a class="nav-link" href="{% url 'create_profile' %}">
              <i class="fas fa-user text-secondary"></i>
              <span class="ml-2" style="color: white">User Profile</span>
            </a>
          </li>
          {% endif %}

          <li class="nav-item">
            <a class="nav-link" href="">
              <i class="fa-solid fa-gear"></i>
              <span class="ml-2" style="color: white">Settings</span>
            </a>
          </li>

          {% if status == '1' %}

          <span
            class="nav-item dropdown no-arrow mt-5"
            style="padding: 0%; margin: 0"
          >
            <a
              class="dropdown-toggle"
              href="#"
              id="userDropdown"
              role="button"
              data-toggle="dropdown"
              aria-haspopup="true"
              aria-expanded="false"
            >
              <center>
                <div
                  class="container d-flex justify-space-between align-items-center"
                  style="
                    border-radius: 15px;
                    background-color: rgb(12, 56, 149);
                  "
                >
                  <i class="fas fa-user text-light"></i>
                  <span>
                    <p class="m-3 text-light">{{user.username}}</p>
                  </span>
                </div>
              </center>
            </a>
            <div
              class="dropdown-menu dropdown-menu-right"
              aria-labelledby="userDropdown"
            >
              <a class="dropdown-item">Profile</a>
              <div class="dropdown-divider"></div>
              <a
                class="dropdown-item"
                href=""
                data-toggle="modal"
                data-target="#logoutModal"
                >Logout</a
              >
            </div>
          </span>
          {% endif %}
        </ul>
      </div>

      {% block body %}{% endblock %}
    </div>
    <!-- /#wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
      <i class="fas fa-angle-up"></i>
    </a>

    <!-- Logout Modal-->
    <div
      class="modal fade"
      id="logoutModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div
          class="modal-content"
          style="background-color: #202020a7; color: white; border-radius: 15px"
        >
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
            <button
              class="close"
              type="button"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">Ã—</span>
            </button>
          </div>
          <div class="modal-body">
            Select "Logout" below if you are ready to end your current session.
          </div>
          <div class="modal-footer">
            <button
              class="btn btn-secondary"
              type="button"
              data-dismiss="modal"
            >
              Cancel
            </button>
            <a class="btn btn-primary" href="/logout">Logout</a>
          </div>
        </div>
      </div>
    </div>
    {% block content %} {% endblock %}
    <script src="{%static 'script.js' %}" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script
      src="https://kit.fontawesome.com/66f2037033.js"
      crossorigin="anonymous"
    ></script>
    <script src="{% static 'core/js/jquery.js' %}"></script>
    <script src="{% static 'core/js/popper.js' %}"></script>
    <script src="{% static 'core/js/bootstrap.js' %}"></script>

    {% include 'patient/ajax.html' %} {% block javascript %}
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script>
      var counts = []
      var sympt = []
      
      {% for item in sympt %}
        counts.push({{item.1}})
        sympt.push('{{item.0}}')
      {% endfor %}
        
        
            var options = {
              title: {
                text: "Symptoms Frequency",
                align: "left",
                style: {
                  fontSize: "16px",
                  color: "#fff",
                },
              },
              series: counts,
              labels: sympt,
              chart: {
                type: "donut",
                foreColor: "#ffffff",
              },
              theme: {
                mode: "light",
                palette: "palette",
                monochrome: {
                  enabled: true,
                  color: "#409a19",
                  shadeTo: "dark",
                  shadeIntensity: 0.65,
                },
              },
              stroke: {
                colors: ["#202020"],
              },
              plotOptions: {
                pie: {
                  expandOnClick: false,
                },
              },
              data: {
                chartOptions: {
                  colors: ["#FDD835", "#FDD835", "#FDD835", "#5A2A27", "#C4BBAF"],
                },
              },
              responsive: [
                {
                  breakpoint: 480,
                  options: {
                    chart: {
                      width: "100%",
                    },
                    legend: {
                      position: "bottom",
                    },
                  },
                },
              ],
              datasets: [
                {
                  borderColor: ["#202020"],
                },
              ],
            };

            var chart = new ApexCharts(document.getElementById("chart"), options);
            chart.render();

      var data = [];
      var dates = [];
      {% for w in arr %}
          data.push({{ w.weight }});
          dates.push('{{ w.date }}');
      {% endfor %}

      var options = {
          series: [{
              name: "Weight",
              data: data
          }],
          chart: {
              height: 350,
              type: "line",
          },
          forecastDataPoints: {
              count: 7,
          },
          stroke: {
              width: 5,
              curve: "smooth",
          },
          xaxis: {
              type: "datetime",
              categories: dates.map(date => new Date(date).getTime()), // Convert dates to milliseconds since epoch
              tickAmount: 10,
              labels: {
                  formatter: function (value, timestamp, opts) {
                      return opts.dateFormatter(new Date(timestamp), "dd MMM");
                  },
              },
          },
          title: {
              text: "Weight Analysis",
              align: "left",
              style: {
                  fontSize: "16px",
                  color: "#fff",
              },
          },
          fill: {
              type: "gradient",
              gradient: {
                  shade: "dark",
                  gradientToColors: ["#FDD835"],
                  shadeIntensity: 1,
                  type: "horizontal",
                  opacityFrom: 1,
                  opacityTo: 1,
                  stops: [0, 100, 100, 100],
              },
          },
          yaxis: {
              min: 0,
              max: 150,
          },
      };

      var chart2 = new ApexCharts(document.querySelector("#chart2"), options);
      chart2.render();



      //chart3
      var options = {
        series: [{
        name: 'Inflation',
        data: [2.3, 3.1, 4.0, 10.1, 4.0, 3.6, 3.2, 2.3, 1.4, 0.8, 0.5, 0.2]
      }],
        chart: {
        height: 350,
        type: 'bar',
      },
      plotOptions: {
        bar: {
          borderRadius: 10,
          dataLabels: {
            position: 'top', // top, center, bottom
          },
        }
      },
      dataLabels: {
        enabled: true,
        formatter: function (val) {
          return val + "%";
        },
        offsetY: -20,
        style: {
          fontSize: '12px',
          colors: ["#304758"]
        }
      },
      
      xaxis: {
        categories: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        position: 'top',
        axisBorder: {
          show: false
        },
        axisTicks: {
          show: false
        },
        crosshairs: {
          fill: {
            type: 'gradient',
            gradient: {
              colorFrom: '#D8E3F0',
              colorTo: '#BED1E6',
              stops: [0, 100],
              opacityFrom: 0.4,
              opacityTo: 0.5,
            }
          }
        },
        tooltip: {
          enabled: true,
        }
      },
      yaxis: {
        axisBorder: {
          show: false
        },
        axisTicks: {
          show: false,
        },
        labels: {
          show: false,
          formatter: function (val) {
            return val + "%";
          }
        }
      
      },
      title: {
        text: 'Monthly Inflation in Argentina, 2002',
        floating: true,
        offsetY: 330,
        align: 'center',
        style: {
          color: '#444'
        }
      }
      };

      var chart3 = new ApexCharts(document.querySelector("#chart3"), options);
      chart3.render();
    </script>
    {% endblock %}
  </body>
</html>
